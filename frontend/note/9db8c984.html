<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    
    <title>
       javascript常用的代码片段 |  前端迷
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="前端迷,前端开发,前端知识大全,前端优化,前端导航,小程序,ru23.com,JavaScript,ajax,angular,css,webpack,react,gulp,htmlhtml5,mocha,nginx,node,css3,vue,vue-cli,scss">
     <meta name="description" content="转义特殊字符为html实体  123HtmlEncode: function(str)&#123;	return str.replace(/&amp;/g, '&amp;').replace(/\"/g, '"').replace(/&lt;/g, '&lt;').replace(/&gt;/g, '&gt;').replace(/'/g, ''');&#125;,  验证是否为有效的手机电话号">
<meta name="keywords" content="javascript,Snippet">
<meta property="og:type" content="article">
<meta property="og:title" content="javascript常用的代码片段">
<meta property="og:url" content="https://ru23.com/note/9db8c984.html">
<meta property="og:site_name" content="前端迷">
<meta property="og:description" content="转义特殊字符为html实体  123HtmlEncode: function(str)&#123;	return str.replace(/&amp;/g, '&amp;').replace(/\"/g, '"').replace(/&lt;/g, '&lt;').replace(/&gt;/g, '&gt;').replace(/'/g, ''');&#125;,  验证是否为有效的手机电话号">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-05-18T15:10:37.428Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="javascript常用的代码片段">
<meta name="twitter:description" content="转义特殊字符为html实体  123HtmlEncode: function(str)&#123;	return str.replace(/&amp;/g, '&amp;').replace(/\"/g, '"').replace(/&lt;/g, '&lt;').replace(/&gt;/g, '&gt;').replace(/'/g, ''');&#125;,  验证是否为有效的手机电话号">  
    <link rel="icon" href="//cdn.ru23.com/img/favicon.ico">
    
    <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/style.css"> <script src="//cdn.ru23.com/js/pace.min.js"></script> 
  
  </head><body><div style="display: none;">
    <script src="//s22.cnzz.com/z_stat.php?id=1275440747&web_id=1275440747" language="JavaScript"></script>
  </div>


  




  <div id="container">
    <header id="header">
    <div id="banner"></div>
    <div id="header-outer">
        <div id="header-menu" class="header-menu-pos animated">
            <div class="header-menu-container">
                <a href="/" class="left">
                    <span class="site-title">前端迷</span>
                </a>
                <nav id="header-menu-nav" class="right">
                    
                    <a target="_blank" href="https://58fe.com">
                        <i class="fa fa-heart"></i>
                        <span>前端社区</span>
                    </a>
                    
                    <a href="/">
                        <i class="fa fa-home"></i>
                        <span>主页</span>
                    </a>
                    
                    <a href="/archives">
                        <i class="fa fa-archive"></i>
                        <span>归档</span>
                    </a>
                    
                </nav>
                <a class="mobile-header-menu-button">
                    <i class="fa fa-bars"></i>
                </a>
            </div>
        </div>
        <div id="header-row">
            <div id="logo">
                <a href="/">
                    <img src="//cdn.ru23.com/img/images/chrome.png" alt="logo">
                </a>
            </div>
            <div class="header-info">
                <div id="header-title">
                    
                    <h2>
                        前端迷
                    </h2>
                    
                </div>
                <div id="header-description">
                    
                    <h3>
                        凡事预则立，不预则废
                    </h3>
                    
                </div>
            </div>
            <nav class="header-nav">
                <div class="social">
                    
                        <a title="公众号" target="_blank" href="https://mp.weixin.qq.com/s/K3yG4eyuQvZxXIU9jas8kA">
                          <img src="//cdn.ru23.com/icon/mp.png" alt="logo">
                          </a>
                    
                        <a title="掘金" target="_blank" href="https://juejin.im/user/57fb24cf816dfa0056c1f8af">
                          <img src="//cdn.ru23.com/icon/juejin.png" alt="logo">
                          </a>
                    
                        <a title="Github" target="_blank" href="//github.com/ru23">
                          <img src="//cdn.ru23.com/icon/github.png" alt="logo">
                          </a>
                    
                        <a title="知乎" target="_blank" href="https://www.zhihu.com/people/58fe/activities">
                          <img src="//cdn.ru23.com/icon/zhihu.png" alt="logo">
                          </a>
                    
                </div>
            </nav>
        </div>
    </div>
</header>
    <div class="outer">
      <div class="outer-section">
        <section id="main" class="body-wrap"><article id="post-2016-10-JavaScript-code-snippets" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        <header class="article-header">
            
  
    <h1 class="post-title" itemprop="name">
      javascript常用的代码片段
    </h1>
    <div class="post-title-bar">
      <ul>
          
              <li>
                  <i class="fa fa-book"></i>
                  
                      <a href="/categories/front-end/">front-end</a>
                  
              </li>
          
        <li>
          <i class="fa fa-calendar"></i>  2016-10-27
        </li>
        <li>
          <i class="fa fa-eye"></i>
          <span id="busuanzi_value_page_pv"></span>
        </li>
      </ul>
    </div>
  

            
        </header>
        
        <div class="article-entry post-content" itemprop="articleBody">
            
            
            <meta name="generator" content="Hexo 3.8.0"><ul>
<li>转义特殊字符为html实体</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HtmlEncode: <span class="function"><span class="keyword">function</span>(<span class="params">str</span>)</span>{</span><br><span class="line">	<span class="keyword">return</span> str.replace(<span class="regexp">/&/g</span>, <span class="string">'&'</span>).replace(<span class="regexp">/\"/g</span>, <span class="string">'"'</span>).replace(<span class="regexp">/, <span class="string">'<'< span="">).replace(<span class="regexp">/>/g</span>, <span class="string">'>'</span>).replace(<span class="regexp">/'/g</span>, <span class="string">''</span><span class="string">');</span><!--'<--></span><br><span class="line"><span class="string">},</span></span><br></span></span></pre></td></tr></tbody></table></figure>
<ul>
<li>验证是否为有效的手机电话号码</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">IsMobile: <span class="function"><span class="keyword">function</span>(<span class="params">str</span>)</span>{</span><br><span class="line">	<span class="keyword">var</span> rp = <span class="regexp">/^1[3|4|5|7|8][0-9]\d{4,8}$/</span>;</span><br><span class="line">	<span class="keyword">return</span> rp.test(str);</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>验证是否为有效的座机电话号码</li>
</ul>
<a id="more"></a>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">IsTel: <span class="function"><span class="keyword">function</span>(<span class="params">str</span>)</span>{</span><br><span class="line">	<span class="keyword">var</span> rp = <span class="regexp">/^([0-9]{3,4}-)?[0-9]{7,8}$/</span>;</span><br><span class="line">	<span class="keyword">return</span> rp.test(str);</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>判断是那种类型的浏览器</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">WhichBrowser: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="keyword">var</span> userAgent = navigator.userAgent;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> isOpera = userAgent.indexOf(<span class="string">"Opera"</span>) > <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">var</span> isIE = userAgent.indexOf(<span class="string">"compatible"</span>) > <span class="number">-1</span> && userAgent.indexOf(<span class="string">"MSIE"</span>) > <span class="number">-1</span> && !isOpera;</span><br><span class="line">	<span class="keyword">var</span> isFF = userAgent.indexOf(<span class="string">"Firefox"</span>) > <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">var</span> isCH = userAgent.indexOf(<span class="string">"Chrome"</span>) > <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">var</span> isSafari = userAgent.indexOf(<span class="string">"Safari"</span>) > <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (isIE){</span><br><span class="line">		<span class="keyword">var</span> IE5 = IE55 = IE6 = IE7 = IE8 = <span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">var</span> reIE = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"MSIE (\\d+\\.\\d+);"</span>);</span><br><span class="line">		reIE.test(userAgent);</span><br><span class="line">		<span class="keyword">var</span> fIEVersion = <span class="built_in">parseFloat</span>(<span class="built_in">RegExp</span>[<span class="string">"$1"</span>]);</span><br><span class="line">		IE55 = fIEVersion == <span class="number">5.5</span>;</span><br><span class="line">		IE6 = fIEVersion == <span class="number">6.0</span>;</span><br><span class="line">		IE7 = fIEVersion == <span class="number">7.0</span>;</span><br><span class="line">		IE8 = fIEVersion == <span class="number">8.0</span>;</span><br><span class="line">		<span class="keyword">if</span> (IE55) {</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"IE55"</span>;</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">if</span> (IE6) {</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"IE6"</span>;</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">if</span> (IE7) {</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"IE7"</span>;</span><br><span class="line">		}</span><br><span class="line">		<span class="keyword">if</span> (IE8) {</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"IE8"</span>;</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (isFF) {</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Firefox"</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (isCH) {</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Chrome"</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (isOpera) {</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Opera"</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span> (isSafari) {</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Safari"</span>;</span><br><span class="line">	}</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>获取客户端浏览器cookie</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">GetCookie: <span class="function"><span class="keyword">function</span>(<span class="params">c_name</span>)</span>{</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">document</span>.cookie.length><span class="number">0</span>){</span><br><span class="line">		c_start = <span class="built_in">document</span>.cookie.indexOf(c_name + <span class="string">'='</span>);</span><br><span class="line">		<span class="keyword">if</span>(c_start != <span class="number">-1</span>){</span><br><span class="line">			c_start = c_start + c_name.length + <span class="number">1</span>;</span><br><span class="line">			c_end = <span class="built_in">document</span>.cookie.indexOf(<span class="string">';'</span>,c_start);</span><br><span class="line">			<span class="keyword">if</span> (c_end==<span class="number">-1</span>) c_end = <span class="built_in">document</span>.cookie.length;</span><br><span class="line">			<span class="keyword">return</span> <span class="built_in">unescape</span>(<span class="built_in">document</span>.cookie.substring(c_start,c_end));</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>设置客户端浏览器cookie</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SetCookie: <span class="function"><span class="keyword">function</span>(<span class="params">c_name, value, expiredays</span>)</span>{</span><br><span class="line">	<span class="keyword">var</span> exdate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">	exdate.setDate(exdate.getDate() + expiredays);</span><br><span class="line">	<span class="built_in">document</span>.cookie = c_name + <span class="string">"="</span> + <span class="built_in">escape</span>(value) + ((expiredays==<span class="literal">null</span>) ? <span class="string">""</span> : <span class="string">";expires="</span>+exdate.toGMTString());</span><br><span class="line">},</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>字符串长度截取</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cutstr</span>(<span class="params">str, len</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> temp,</span><br><span class="line">        icount = <span class="number">0</span>,</span><br><span class="line">        patrn = <span class="regexp">/[^\x00-\xff]/</span>，</span><br><span class="line">        strre = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i < str.length; i++) {</span><br><span class="line">        <span class="keyword">if</span> (icount < len - <span class="number">1</span>) {</span><br><span class="line">            temp = str.substr(i, <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span> (patrn.exec(temp) == <span class="literal">null</span>) {</span><br><span class="line">                   icount = icount + <span class="number">1</span></span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                icount = icount + <span class="number">2</span></span><br><span class="line">            }</span><br><span class="line">            strre += temp</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> strre + <span class="string">"..."</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>替换全部</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.replaceAll = <span class="function"><span class="keyword">function</span>(<span class="params">s1, s2</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="keyword">new</span> <span class="built_in">RegExp</span>(s1, <span class="string">"gm"</span>), s2)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>清除空格</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.trim = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> reExtraSpace = <span class="regexp">/^\s*(.*?)\s+$/</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.replace(reExtraSpace, <span class="string">"$1"</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>清除左空格/右空格</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ltrim</span>(<span class="params">s</span>)</span>{ <span class="keyword">return</span> s.replace( <span class="regexp">/^(\s*|　*)/</span>, <span class="string">""</span>); } </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rtrim</span>(<span class="params">s</span>)</span>{ <span class="keyword">return</span> s.replace( <span class="regexp">/(\s*|　*)$/</span>, <span class="string">""</span>); }</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>判断是否以某个字符串开头</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.startWith = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.indexOf(s) == <span class="number">0</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>判断是否以某个字符串结束</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.endWith = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> d = <span class="keyword">this</span>.length - s.length;</span><br><span class="line">    <span class="keyword">return</span> (d >= <span class="number">0</span> && <span class="keyword">this</span>.lastIndexOf(s) == d)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>转义html标签</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HtmlEncode</span>(<span class="params">text</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> text.replace(<span class="regexp">/&/g</span>, <span class="string">'&'</span>).replace(<span class="regexp">/\"/g</span>, <span class="string">'"'</span>).replace(<span class="regexp">/, <span class="string">'<'< span="">).replace(<span class="regexp">/>/g</span>, <span class="string">'>'</span>)<!--'<--></span><br><span class="line">}</span><br></span></span></pre></td></tr></tbody></table></figure>
<ul>
<li>时间日期格式转换</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Date</span>.prototype.Format = <span class="function"><span class="keyword">function</span>(<span class="params">formatStr</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> str = formatStr;</span><br><span class="line">    <span class="keyword">var</span> Week = [<span class="string">'日'</span>, <span class="string">'一'</span>, <span class="string">'二'</span>, <span class="string">'三'</span>, <span class="string">'四'</span>, <span class="string">'五'</span>, <span class="string">'六'</span>];</span><br><span class="line">    str = str.replace(<span class="regexp">/yyyy|YYYY/</span>, <span class="keyword">this</span>.getFullYear());</span><br><span class="line">    str = str.replace(<span class="regexp">/yy|YY/</span>, (<span class="keyword">this</span>.getYear() % <span class="number">100</span>) > <span class="number">9</span> ? (<span class="keyword">this</span>.getYear() % <span class="number">100</span>).toString() : <span class="string">'0'</span> + (<span class="keyword">this</span>.getYear() % <span class="number">100</span>));</span><br><span class="line">    str = str.replace(<span class="regexp">/MM/</span>, (<span class="keyword">this</span>.getMonth() + <span class="number">1</span>) > <span class="number">9</span> ? (<span class="keyword">this</span>.getMonth() + <span class="number">1</span>).toString() : <span class="string">'0'</span> + (<span class="keyword">this</span>.getMonth() + <span class="number">1</span>));</span><br><span class="line">    str = str.replace(<span class="regexp">/M/g</span>, (<span class="keyword">this</span>.getMonth() + <span class="number">1</span>));</span><br><span class="line">    str = str.replace(<span class="regexp">/w|W/g</span>, Week[<span class="keyword">this</span>.getDay()]);</span><br><span class="line">    str = str.replace(<span class="regexp">/dd|DD/</span>, <span class="keyword">this</span>.getDate() > <span class="number">9</span> ? <span class="keyword">this</span>.getDate().toString() : <span class="string">'0'</span> + <span class="keyword">this</span>.getDate());</span><br><span class="line">    str = str.replace(<span class="regexp">/d|D/g</span>, <span class="keyword">this</span>.getDate());</span><br><span class="line">    str = str.replace(<span class="regexp">/hh|HH/</span>, <span class="keyword">this</span>.getHours() > <span class="number">9</span> ? <span class="keyword">this</span>.getHours().toString() : <span class="string">'0'</span> + <span class="keyword">this</span>.getHours());</span><br><span class="line">    str = str.replace(<span class="regexp">/h|H/g</span>, <span class="keyword">this</span>.getHours());</span><br><span class="line">    str = str.replace(<span class="regexp">/mm/</span>, <span class="keyword">this</span>.getMinutes() > <span class="number">9</span> ? <span class="keyword">this</span>.getMinutes().toString() : <span class="string">'0'</span> + <span class="keyword">this</span>.getMinutes());</span><br><span class="line">    str = str.replace(<span class="regexp">/m/g</span>, <span class="keyword">this</span>.getMinutes());</span><br><span class="line">    str = str.replace(<span class="regexp">/ss|SS/</span>, <span class="keyword">this</span>.getSeconds() > <span class="number">9</span> ? <span class="keyword">this</span>.getSeconds().toString() : <span class="string">'0'</span> + <span class="keyword">this</span>.getSeconds());</span><br><span class="line">    str = str.replace(<span class="regexp">/s|S/g</span>, <span class="keyword">this</span>.getSeconds());</span><br><span class="line">    <span class="keyword">return</span> str</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>判断是否为数字类型</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isDigit</span>(<span class="params">value</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> patrn = <span class="regexp">/^[0-9]*$/</span>;</span><br><span class="line">    <span class="keyword">if</span> (patrn.exec(value) == <span class="literal">null</span> || value == <span class="string">""</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>设置cookie值</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name, value, Hours</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> offset = <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">var</span> utc = d.getTime() + (d.getTimezoneOffset() * <span class="number">60000</span>);</span><br><span class="line">    <span class="keyword">var</span> nd = utc + (<span class="number">3600000</span> * offset);</span><br><span class="line">    <span class="keyword">var</span> exp = <span class="keyword">new</span> <span class="built_in">Date</span>(nd);</span><br><span class="line">    exp.setTime(exp.getTime() + Hours * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line">    <span class="built_in">document</span>.cookie = name + <span class="string">"="</span> + <span class="built_in">escape</span>(value) + <span class="string">";path=/;expires="</span> + exp.toGMTString() + <span class="string">";domain=360doc.com;"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>获取cookie值</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">name</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> arr = <span class="built_in">document</span>.cookie.match(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^| )"</span> + name + <span class="string">"=([^;]*)(;|$)"</span>));</span><br><span class="line">    <span class="keyword">if</span> (arr != <span class="literal">null</span>) <span class="keyword">return</span> <span class="built_in">unescape</span>(arr[<span class="number">2</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>加入收藏夹</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AddFavorite</span>(<span class="params">sURL, sTitle</span>) </span>{</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="built_in">window</span>.external.addFavorite(sURL, sTitle)</span><br><span class="line">    } <span class="keyword">catch</span>(e) {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="built_in">window</span>.sidebar.addPanel(sTitle, sURL, <span class="string">""</span>)</span><br><span class="line">        } <span class="keyword">catch</span>(e) {</span><br><span class="line">            alert(<span class="string">"加入收藏失败，请使用Ctrl+D进行添加"</span>)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>设为首页</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setHomepage</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.all) {</span><br><span class="line">        <span class="built_in">document</span>.body.style.behavior = <span class="string">'url(#default#homepage)'</span>;</span><br><span class="line">        <span class="built_in">document</span>.body.setHomePage(<span class="string">'http://w3cboy.com'</span>)</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.sidebar) {</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">window</span>.netscape) {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                netscape.security.PrivilegeManager.enablePrivilege(<span class="string">"UniversalXPConnect"</span>)</span><br><span class="line">            } <span class="keyword">catch</span>(e) {</span><br><span class="line">                alert(<span class="string">"该操作被浏览器拒绝，如果想启用该功能，请在地址栏内输入 about:config,然后将项 signed.applets.codebase_principal_support 值该为true"</span>)</span><br><span class="line">                }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">var</span> prefs = Components.classes[<span class="string">'@mozilla.org/preferences-service;1'</span>].getService(Components.interfaces.nsIPrefBranch);</span><br><span class="line">        prefs.setCharPref(<span class="string">'browser.startup.homepage'</span>, <span class="string">'http://w3cboy.com'</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>加载样式文件</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">LoadStyle</span>(<span class="params">url</span>) </span>{</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="built_in">document</span>.createStyleSheet(url)</span><br><span class="line">    } <span class="keyword">catch</span>(e) {</span><br><span class="line">        <span class="keyword">var</span> cssLink = <span class="built_in">document</span>.createElement(<span class="string">'link'</span>);</span><br><span class="line">        cssLink.rel = <span class="string">'stylesheet'</span>;</span><br><span class="line">        cssLink.type = <span class="string">'text/css'</span>;</span><br><span class="line">        cssLink.href = url;</span><br><span class="line">        <span class="keyword">var</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>];</span><br><span class="line">        head.appendChild(cssLink)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>返回脚本内容</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">evalscript</span>(<span class="params">s</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span>(s.indexOf(<span class="string">'<script'< span>) == <span class="number">-1</span>) <span class="keyword">return</span> s;</script'<></span><br><span class="line">    <span class="keyword">var</span> p = <span class="regexp">/<script[^\>]*?>([^\x00]*?)<\ script="">/ig<!--\--></script[^\></span>;</span><br><span class="line">    <span class="keyword">var</span> arr = [];</span><br><span class="line">    <span class="keyword">while</span>(arr = p.exec(s)) {</span><br><span class="line">        <span class="keyword">var</span> p1 = <span class="regexp">/<script[^\>]*?src=\"([^\>]*?)\"[^\>]*?(reload=\"1\")?(?:charset=\"([\w\-]+?)\")?><\ script="">/i<!--\--></script[^\></span>;</span><br><span class="line">        <span class="keyword">var</span> arr1 = [];</span><br><span class="line">        arr1 = p1.exec(arr[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">if</span>(arr1) {</span><br><span class="line">            appendscript(arr1[<span class="number">1</span>], <span class="string">''</span>, arr1[<span class="number">2</span>], arr1[<span class="number">3</span>]);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            p1 = <span class="regexp">/<script(.*?)>([^\x00]+?)<\ script="">/i<!--\--></script(.*?)></span>;</span><br><span class="line">            arr1 = p1.exec(arr[<span class="number">0</span>]);</span><br><span class="line">            appendscript(<span class="string">''</span>, arr1[<span class="number">2</span>], arr1[<span class="number">1</span>].indexOf(<span class="string">'reload='</span>) != <span class="number">-1</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">}</span><br></span></pre></td></tr></tbody></table></figure>
<ul>
<li>清除脚本内容</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stripscript</span>(<span class="params">s</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> s.replace(<span class="regexp">/<script.*?>.*?<\ script="">/ig<!--\--></script.*?></span>, <span class="string">''</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>动态加载脚本文件</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">appendscript</span>(<span class="params">src, text, reload, charset</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> id = hash(src + text);</span><br><span class="line">    <span class="keyword">if</span>(!reload && in_array(id, evalscripts)) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(reload && $(id)) {</span><br><span class="line">        $(id).parentnode.removeChild($(id));</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    evalscripts.push(id);</span><br><span class="line">    <span class="keyword">var</span> scriptnode = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">    scriptnode.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">    scriptnode.id = id;</span><br><span class="line">    scriptnode.charset = charset ? charset : (BROWSER.firefox ? <span class="built_in">document</span>.characterSet : <span class="built_in">document</span>.charset);</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">if</span>(src) {</span><br><span class="line">            scriptnode.src = src;</span><br><span class="line">            scriptnode.onloadDone = <span class="literal">false</span>;</span><br><span class="line">            scriptnode.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">                scriptnode.onloadDone = <span class="literal">true</span>;</span><br><span class="line">                JSLOADED[src] = <span class="number">1</span>;</span><br><span class="line">             };</span><br><span class="line">             scriptnode.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">                 <span class="keyword">if</span>((scriptnode.readyState == <span class="string">'loaded'</span> || scriptnode.readyState == <span class="string">'complete'</span>) && !scriptnode.onloadDone) {</span><br><span class="line">                    scriptnode.onloadDone = <span class="literal">true</span>;</span><br><span class="line">                    JSLOADED[src] = <span class="number">1</span>;</span><br><span class="line">                }</span><br><span class="line">             };</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span>(text){</span><br><span class="line">            scriptnode.text = text;</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(scriptnode);</span><br><span class="line">    } <span class="keyword">catch</span>(e) {}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>返回按ID检索的元素对象</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$</span>(<span class="params">id</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> !id ? <span class="literal">null</span> : <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>跨浏览器绑定事件</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEventSamp</span>(<span class="params">obj,evt,fn</span>)</span>{ </span><br><span class="line">    <span class="keyword">if</span>(!oTarget){<span class="keyword">return</span>;}</span><br><span class="line">    <span class="keyword">if</span> (obj.addEventListener) { </span><br><span class="line">        obj.addEventListener(evt, fn, <span class="literal">false</span>); </span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">if</span>(obj.attachEvent){ </span><br><span class="line">        obj.attachEvent(<span class="string">'on'</span>+evt,fn); </span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        oTarget[<span class="string">"on"</span> + sEvtType] = fn;</span><br><span class="line">    } </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>跨浏览器删除事件</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delEvt</span>(<span class="params">obj,evt,fn</span>)</span>{</span><br><span class="line">    <span class="keyword">if</span>(!obj){<span class="keyword">return</span>;}</span><br><span class="line">    <span class="keyword">if</span>(obj.addEventListener){</span><br><span class="line">        obj.addEventListener(evt,fn,<span class="literal">false</span>);</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">if</span>(oTarget.attachEvent){</span><br><span class="line">        obj.attachEvent(<span class="string">"on"</span> + evt,fn);</span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        obj[<span class="string">"on"</span> + evt] = fn;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>为元素添加on方法</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Element.prototype.on = Element.prototype.addEventListener;</span><br><span class="line"> </span><br><span class="line">nodeList.prototype.on = <span class="function"><span class="keyword">function</span> (<span class="params">event, fn</span>) </span>{、</span><br><span class="line">    [][<span class="string">'forEach'</span>].call(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>{</span><br><span class="line">        el.on(event, fn);</span><br><span class="line">    });</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>为元素添加trigger方法</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Element.prototype.trigger = <span class="function"><span class="keyword">function</span> (<span class="params">type, data</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> event = <span class="built_in">document</span>.createEvent(<span class="string">'HTMLEvents'</span>);</span><br><span class="line">    event.initEvent(type, <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line">    event.data = data || {};</span><br><span class="line">    event.eventName = type;</span><br><span class="line">    event.target = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">this</span>.dispatchEvent(event);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">};</span><br><span class="line"> </span><br><span class="line">nodeList.prototype.trigger = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>{</span><br><span class="line">    [][<span class="string">'forEach'</span>].call(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>{</span><br><span class="line">        el[<span class="string">'trigger'</span>](event);</span><br><span class="line">    });</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>检验URL链接是否有效</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrlState</span>(<span class="params">URL</span>)</span>{ </span><br><span class="line">    <span class="keyword">var</span> xmlhttp = <span class="keyword">new</span> ActiveXObject(<span class="string">"microsoft.xmlhttp"</span>); </span><br><span class="line">    xmlhttp.Open(<span class="string">"GET"</span>,URL, <span class="literal">false</span>);  </span><br><span class="line">    <span class="keyword">try</span>{  </span><br><span class="line">            xmlhttp.Send(); </span><br><span class="line">    }<span class="keyword">catch</span>(e){</span><br><span class="line">    }<span class="keyword">finally</span>{ </span><br><span class="line">        <span class="keyword">var</span> result = xmlhttp.responseText; </span><br><span class="line">        <span class="keyword">if</span>(result){</span><br><span class="line">            <span class="keyword">if</span>(xmlhttp.Status==<span class="number">200</span>){ </span><br><span class="line">                <span class="keyword">return</span>(<span class="literal">true</span>); </span><br><span class="line">             }<span class="keyword">else</span>{ </span><br><span class="line">                   <span class="keyword">return</span>(<span class="literal">false</span>); </span><br><span class="line">             } </span><br><span class="line">         }<span class="keyword">else</span>{ </span><br><span class="line">             <span class="keyword">return</span>(<span class="literal">false</span>); </span><br><span class="line">         } </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>格式化CSS样式代码</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatCss</span>(<span class="params">s</span>)</span>{<span class="comment">//格式化代码</span></span><br><span class="line">    s = s.replace(<span class="regexp">/\s*([\{\}\:\;\,])\s*/g</span>, <span class="string">"$1"</span>);</span><br><span class="line">    s = s.replace(<span class="regexp">/;\s*;/g</span>, <span class="string">";"</span>); <span class="comment">//清除连续分号</span></span><br><span class="line">    s = s.replace(<span class="regexp">/\,[\s\.\#\d]*{/g</span>, <span class="string">"{"</span>);</span><br><span class="line">    s = s.replace(<span class="regexp">/([^\s])\{([^\s])/g</span>, <span class="string">"$1 {\n\t$2"</span>);</span><br><span class="line">    s = s.replace(<span class="regexp">/([^\s])\}([^\n]*)/g</span>, <span class="string">"$1\n}\n$2"</span>);</span><br><span class="line">    s = s.replace(<span class="regexp">/([^\s]);([^\s\}])/g</span>, <span class="string">"$1;\n\t$2"</span>);</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>压缩CSS样式代码</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compressCss</span> (<span class="params">s</span>) </span>{<span class="comment">//压缩代码</span></span><br><span class="line">    s = s.replace(<span class="regexp">/\/\*(.|\n)*?\*\//g</span>, <span class="string">""</span>); <span class="comment">//删除注释</span></span><br><span class="line">    s = s.replace(<span class="regexp">/\s*([\{\}\:\;\,])\s*/g</span>, <span class="string">"$1"</span>);</span><br><span class="line">    s = s.replace(<span class="regexp">/\,[\s\.\#\d]*\{/g</span>, <span class="string">"{"</span>); <span class="comment">//容错处理</span></span><br><span class="line">    s = s.replace(<span class="regexp">/;\s*;/g</span>, <span class="string">";"</span>); <span class="comment">//清除连续分号</span></span><br><span class="line">    s = s.match(<span class="regexp">/^\s*(\S+(\s+\S+)*)\s*$/</span>); <span class="comment">//去掉首尾空白</span></span><br><span class="line">    <span class="keyword">return</span> (s == <span class="literal">null</span>) ? <span class="string">""</span> : s[<span class="number">1</span>];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>获取当前路径</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> currentPageUrl = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>.href === <span class="string">"undefined"</span>) {</span><br><span class="line">    currentPageUrl = <span class="built_in">document</span>.location.toString().toLowerCase();</span><br><span class="line">}<span class="keyword">else</span> {</span><br><span class="line">    currentPageUrl = <span class="keyword">this</span>.href.toString().toLowerCase();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>判断是否移动设备</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isMobile</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>._isMobile === <span class="string">'boolean'</span>){</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._isMobile;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">var</span> screenWidth = <span class="keyword">this</span>.getScreenWidth();</span><br><span class="line">    <span class="keyword">var</span> fixViewPortsExperiment = rendererModel.runningExperiments.FixViewport ||rendererModel.runningExperiments.fixviewport;</span><br><span class="line">    <span class="keyword">var</span> fixViewPortsExperimentRunning = fixViewPortsExperiment && (fixViewPortsExperiment.toLowerCase() === <span class="string">"new"</span>);</span><br><span class="line">    <span class="keyword">if</span>(!fixViewPortsExperiment){</span><br><span class="line">        <span class="keyword">if</span>(!<span class="keyword">this</span>.isAppleMobileDevice()){</span><br><span class="line">            screenWidth = screenWidth/<span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">var</span> isMobileScreenSize = screenWidth < <span class="number">600</span>;</span><br><span class="line">    <span class="keyword">var</span> isMobileUserAgent = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">this</span>._isMobile = isMobileScreenSize && <span class="keyword">this</span>.isTouchScreen();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._isMobile;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>判断是否移动设备访问</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isMobileUserAgent</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> (<span class="regexp">/iphone|ipod|android.*mobile|windows.*phone|blackberry.*mobile/i</span>.test(<span class="built_in">window</span>.navigator.userAgent.toLowerCase()));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>判断是否苹果移动设备访问</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isAppleMobileDevice</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> (<span class="regexp">/iphone|ipod|ipad|Macintosh/i</span>.test(navigator.userAgent.toLowerCase()));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>判断是否安卓移动设备访问</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isAndroidMobileDevice</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> (<span class="regexp">/android/i</span>.test(navigator.userAgent.toLowerCase()));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>判断是否Touch屏幕</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isTouchScreen</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> ((<span class="string">'ontouchstart'</span> <span class="keyword">in</span> <span class="built_in">window</span>) || <span class="built_in">window</span>.DocumentTouch && <span class="built_in">document</span> <span class="keyword">instanceof</span> DocumentTouch);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>判断是否打开视窗</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isViewportOpen</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> !!<span class="built_in">document</span>.getElementById(<span class="string">'wixMobileViewport'</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>获取移动设备初始化大小</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInitZoom</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">if</span>(!<span class="keyword">this</span>._initZoom){</span><br><span class="line">        <span class="keyword">var</span> screenWidth = <span class="built_in">Math</span>.min(screen.height, screen.width);</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.isAndroidMobileDevice() && !<span class="keyword">this</span>.isNewChromeOnAndroid()){</span><br><span class="line">            screenWidth = screenWidth/<span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line">        }</span><br><span class="line">            <span class="keyword">this</span>._initZoom = screenWidth /<span class="built_in">document</span>.body.offsetWidth;</span><br><span class="line">        }</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._initZoom;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>获取移动设备最大化大小</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getZoom</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> screenWidth = (<span class="built_in">Math</span>.abs(<span class="built_in">window</span>.orientation) === <span class="number">90</span>) ? <span class="built_in">Math</span>.max(screen.height, screen.width) : <span class="built_in">Math</span>.min(screen.height, screen.width);</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.isAndroidMobileDevice() && !<span class="keyword">this</span>.isNewChromeOnAndroid()){</span><br><span class="line">        screenWidth = screenWidth/<span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">var</span> FixViewPortsExperiment = rendererModel.runningExperiments.FixViewport || rendererModel.runningExperiments.fixviewport;</span><br><span class="line">    <span class="keyword">var</span> FixViewPortsExperimentRunning = FixViewPortsExperiment && (FixViewPortsExperiment === <span class="string">"New"</span> || FixViewPortsExperiment === <span class="string">"new"</span>);</span><br><span class="line">    <span class="keyword">if</span>(FixViewPortsExperimentRunning){</span><br><span class="line">        <span class="keyword">return</span> screenWidth / <span class="built_in">window</span>.innerWidth;</span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">return</span> screenWidth / <span class="built_in">document</span>.body.offsetWidth;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>获取移动设备屏幕宽度</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getScreenWidth</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> smallerSide = <span class="built_in">Math</span>.min(screen.width, screen.height);</span><br><span class="line">    <span class="keyword">var</span> fixViewPortsExperiment = rendererModel.runningExperiments.FixViewport || rendererModel.runningExperiments.fixviewport;</span><br><span class="line">    <span class="keyword">var</span> fixViewPortsExperimentRunning = fixViewPortsExperiment && (fixViewPortsExperiment.toLowerCase() === <span class="string">"new"</span>);</span><br><span class="line">    <span class="keyword">if</span>(fixViewPortsExperiment){</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.isAndroidMobileDevice() && !<span class="keyword">this</span>.isNewChromeOnAndroid()){</span><br><span class="line">            smallerSide = smallerSide/<span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> smallerSide;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>完美判断是否为网址</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">IsURL</span>(<span class="params">strUrl</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> regular = <span class="regexp">/^\b(((https?|ftp):\/\/)?[-a-z0-9]+(\.[-a-z0-9]+)*\.(?:com|edu|gov|int|mil|net|org|biz|info|name|museum|asia|coop|aero|[a-z][a-z]|((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d))\b(\/[-a-z0-9_:\@&?=+,.!\/~%\$]*)?)$/i</span></span><br><span class="line">    <span class="keyword">if</span> (regular.test(strUrl)) {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    }<span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>获取页面高度</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageHeight</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> g = <span class="built_in">document</span>, a = g.body, f = g.documentElement, d = g.compatMode == <span class="string">"BackCompat"</span></span><br><span class="line">                    ? a</span><br><span class="line">                    : g.documentElement;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.max(f.scrollHeight, a.scrollHeight, d.clientHeight);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>获取页面scrollLeft</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageScrollLeft</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">document</span>;</span><br><span class="line">    <span class="keyword">return</span> a.documentElement.scrollLeft || a.body.scrollLeft;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>获取页面可视宽度</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageViewWidth</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> d = <span class="built_in">document</span>, a = d.compatMode == <span class="string">"BackCompat"</span></span><br><span class="line">                    ? d.body</span><br><span class="line">                    : d.documentElement;</span><br><span class="line">    <span class="keyword">return</span> a.clientWidth;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>获取页面宽度</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageWidth</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> g = <span class="built_in">document</span>, a = g.body, f = g.documentElement, d = g.compatMode == <span class="string">"BackCompat"</span></span><br><span class="line">                    ? a</span><br><span class="line">                    : g.documentElement;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.max(f.scrollWidth, a.scrollWidth, d.clientWidth);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>获取页面scrollTop</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageScrollTop</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">document</span>;</span><br><span class="line">    <span class="keyword">return</span> a.documentElement.scrollTop || a.body.scrollTop;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>获取页面可视高度</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageViewHeight</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> d = <span class="built_in">document</span>, a = d.compatMode == <span class="string">"BackCompat"</span></span><br><span class="line">                    ? d.body</span><br><span class="line">                    : d.documentElement;</span><br><span class="line">    <span class="keyword">return</span> a.clientHeight;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>去掉url前缀</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeUrlPrefix</span>(<span class="params">a</span>)</span>{</span><br><span class="line">    a=a.replace(<span class="regexp">/：/g</span>,<span class="string">":"</span>).replace(<span class="regexp">/．/g</span>,<span class="string">"."</span>).replace(<span class="regexp">/／/g</span>,<span class="string">"/"</span>);</span><br><span class="line">    <span class="keyword">while</span>(trim(a).toLowerCase().indexOf(<span class="string">"http://"</span>)==<span class="number">0</span>){</span><br><span class="line">        a=trim(a.replace(<span class="regexp">/http:\/\//i</span>,<span class="string">""</span>));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>随机数时间戳</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniqueId</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> a=<span class="built_in">Math</span>.random,b=<span class="built_in">parseInt</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Number</span>(<span class="keyword">new</span> <span class="built_in">Date</span>()).toString()+b(<span class="number">10</span>*a())+b(<span class="number">10</span>*a())+b(<span class="number">10</span>*a());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>全角半角转换</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//iCase: 0全到半，1半到全，其他不转化</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">chgCase</span>(<span class="params">sStr,iCase</span>)</span>{</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> sStr != <span class="string">"string"</span> || sStr.length <= <span="" class="number">0<!--=--></span=""></span> || !(iCase === <span class="number">0</span> || iCase == <span class="number">1</span>)){<br><span class="line">        <span class="keyword">return</span> sStr;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">var</span> i,oRs=[],iCode;</span><br><span class="line">    <span class="keyword">if</span>(iCase){<span class="comment">/*半->全*/</span></span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>; i<sstr.length;i+=<span class="number">1</sstr.length;i+=<span></span>){ <br><span class="line">            iCode = sStr.charCodeAt(i);</span><br><span class="line">            <span class="keyword">if</span>(iCode == <span class="number">32</span>){</span><br><span class="line">                iCode = <span class="number">12288</span>;                                </span><br><span class="line">            }<span class="keyword">else</span> <span class="keyword">if</span>(iCode < <span class="number">127</span>){</span><br><span class="line">                iCode += <span class="number">65248</span>;</span><br><span class="line">            }</span><br><span class="line">                oRs.push(<span class="built_in">String</span>.fromCharCode(iCode)); </span><br><span class="line">            }                </span><br><span class="line">    }<span class="keyword">else</span>{<span class="comment">/*全->半*/</span></span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>; i<sstr.length;i+=<span class="number">1</sstr.length;i+=<span></span>){ <br><span class="line">            iCode = sStr.charCodeAt(i);</span><br><span class="line">            <span class="keyword">if</span>(iCode == <span class="number">12288</span>){</span><br><span class="line">                iCode = <span class="number">32</span>;</span><br><span class="line">            }<span class="keyword">else</span> <span class="keyword">if</span>(iCode > <span class="number">65280</span> && iCode < <span class="number">65375</span>){</span><br><span class="line">                iCode -= <span class="number">65248</span>;                                </span><br><span class="line">            }</span><br><span class="line">                oRs.push(<span class="built_in">String</span>.fromCharCode(iCode)); </span><br><span class="line">         }                </span><br><span class="line">    }                </span><br><span class="line">    <span class="keyword">return</span> oRs.join(<span class="string">""</span>);                </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>确认是否键盘有效输入值</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkKey</span>(<span class="params">iKey</span>)</span>{</span><br><span class="line">    <span class="keyword">if</span>(iKey == <span class="number">32</span> || iKey == <span class="number">229</span>){<span class="keyword">return</span> <span class="literal">true</span>;}<span class="comment">/*空格和异常*/</span></span><br><span class="line">    <span class="keyword">if</span>(iKey><span class="number">47</span> && iKey < <span class="number">58</span>){<span class="keyword">return</span> <span class="literal">true</span>;}<span class="comment">/*数字*/</span></span><br><span class="line">    <span class="keyword">if</span>(iKey><span class="number">64</span> && iKey < <span class="number">91</span>){<span class="keyword">return</span> <span class="literal">true</span>;}<span class="comment">/*字母*/</span></span><br><span class="line">    <span class="keyword">if</span>(iKey><span class="number">95</span> && iKey < <span class="number">108</span>){<span class="keyword">return</span> <span class="literal">true</span>;}<span class="comment">/*数字键盘1*/</span></span><br><span class="line">    <span class="keyword">if</span>(iKey><span class="number">108</span> && iKey < <span class="number">112</span>){<span class="keyword">return</span> <span class="literal">true</span>;}<span class="comment">/*数字键盘2*/</span></span><br><span class="line">    <span class="keyword">if</span>(iKey><span class="number">185</span> && iKey < <span class="number">193</span>){<span class="keyword">return</span> <span class="literal">true</span>;}<span class="comment">/*符号1*/</span></span><br><span class="line">    <span class="keyword">if</span>(iKey><span class="number">218</span> && iKey < <span class="number">223</span>){<span class="keyword">return</span> <span class="literal">true</span>;}<span class="comment">/*符号2*/</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>日期格式化函数+调用方法</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Date</span>.prototype.format = <span class="function"><span class="keyword">function</span>(<span class="params">format</span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> o = {</span><br><span class="line">        <span class="string">"M+"</span> : <span class="keyword">this</span>.getMonth()+<span class="number">1</span>, <span class="comment">//month</span></span><br><span class="line">        <span class="string">"d+"</span> : <span class="keyword">this</span>.getDate(),    <span class="comment">//day</span></span><br><span class="line">        <span class="string">"h+"</span> : <span class="keyword">this</span>.getHours(),   <span class="comment">//hour</span></span><br><span class="line">        <span class="string">"m+"</span> : <span class="keyword">this</span>.getMinutes(), <span class="comment">//minute</span></span><br><span class="line">        <span class="string">"s+"</span> : <span class="keyword">this</span>.getSeconds(), <span class="comment">//second</span></span><br><span class="line">        <span class="string">"q+"</span> : <span class="built_in">Math</span>.floor((<span class="keyword">this</span>.getMonth()+<span class="number">3</span>)/<span class="number">3</span>),  <span class="comment">//quarter</span></span><br><span class="line">        <span class="string">"S"</span> : <span class="keyword">this</span>.getMilliseconds() <span class="comment">//millisecond</span></span><br><span class="line">    };</span><br><span class="line">    <span class="keyword">if</span>(<span class="regexp">/(y+)/</span>.test(format)) format=format.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>,</span><br><span class="line">(<span class="keyword">this</span>.getFullYear()+<span class="string">""</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> o){</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"("</span>+ k +<span class="string">")"</span>).test(format))</span><br><span class="line">            format = format.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>,<span class="built_in">RegExp</span>.$<span class="number">1.</span>length==<span class="number">1</span> ? o[k] :(<span class="string">"00"</span>+ o[k]).substr((<span class="string">""</span>+ o[k]).length));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> format;</span><br><span class="line">}</span><br><span class="line">alert(<span class="keyword">new</span> <span class="built_in">Date</span>().format(<span class="string">"yyyy-MM-dd hh:mm:ss"</span>));</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>常用的正则表达式</li>
</ul>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">//正整数</span><br><span class="line">/^[0-9]*[1-9][0-9]*$/;</span><br><span class="line">//负整数</span><br><span class="line">/^-[0-9]*[1-9][0-9]*$/;</span><br><span class="line">//正浮点数</span><br><span class="line">/^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$/;   </span><br><span class="line">//负浮点数</span><br><span class="line">/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;  </span><br><span class="line">//浮点数</span><br><span class="line">/^(-?\d+)(\.\d+)?$/;</span><br><span class="line">//email地址</span><br><span class="line">/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;</span><br><span class="line">//url地址</span><br><span class="line">/^[a-zA-z]+://(\w+(-\w+)*)(\.(\w+(-\w+)*))*(\?\S*)?$/;</span><br><span class="line">或：^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$ </span><br><span class="line">//年/月/日（年-月-日、年.月.日）</span><br><span class="line">/^(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$/;</span><br><span class="line">//匹配中文字符</span><br><span class="line">/[\u4e00-\u9fa5]/;</span><br><span class="line">//匹配帐号是否合法(字母开头，允许5-10字节，允许字母数字下划线)</span><br><span class="line">/^[a-zA-Z][a-zA-Z0-9_]{4,9}$/;</span><br><span class="line">//匹配空白行的正则表达式</span><br><span class="line">/\n\s*\r/;</span><br><span class="line">//匹配中国邮政编码</span><br><span class="line">/[1-9]\d{5}(?!\d)/;</span><br><span class="line">//匹配身份证</span><br><span class="line">/\d{15}|\d{18}/;</span><br><span class="line">//匹配国内电话号码</span><br><span class="line">/(\d{3}-|\d{4}-)?(\d{8}|\d{7})?/;</span><br><span class="line">//匹配IP地址</span><br><span class="line">/((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)/;</span><br><span class="line">//匹配首尾空白字符的正则表达式</span><br><span class="line">/^\s*|\s*$/;</span><br><span class="line">//匹配HTML标记的正则表达式</span><br><span class="line">< (\S*?)[^>]*>.*?|< .*? />;</span><br><span class="line">//sql 语句</span><br><span class="line">^(select|drop|delete|create|update|insert).*$</span><br><span class="line">//提取信息中的网络链接</span><br><span class="line">(h|H)(r|R)(e|E)(f|F) *= *('|")?(\w|\\|\/|\.)+('|"| *|>)? </span><br><span class="line">//提取信息中的邮件地址</span><br><span class="line">\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)* </span><br><span class="line">//提取信息中的图片链接</span><br><span class="line">(s|S)(r|R)(c|C) *= *('|")?(\w|\\|\/|\.)+('|"| *|>)? </span><br><span class="line">//提取信息中的 IP 地址</span><br><span class="line">(\d+)\.(\d+)\.(\d+)\.(\d+)</span><br><span class="line">//取信息中的中国手机号码</span><br><span class="line">(86)*0*13\d{9} </span><br><span class="line">//提取信息中的中国邮政编码</span><br><span class="line">[1-9]{1}(\d+){5} </span><br><span class="line">//提取信息中的浮点数（即小数）</span><br><span class="line">(-?\d*)\.?\d+ </span><br><span class="line">//提取信息中的任何数字</span><br><span class="line">(-?\d*)(\.\d+)?</span><br><span class="line">//电话区号</span><br><span class="line">^0\d{2,3}$</span><br><span class="line">//腾讯 QQ 号</span><br><span class="line">^[1-9]*[1-9][0-9]*$ </span><br><span class="line">//帐号（字母开头，允许 5-16 字节，允许字母数字下划线）</span><br><span class="line">^[a-zA-Z][a-zA-Z0-9_]{4,15}$ </span><br><span class="line">//中文、英文、数字及下划线</span><br><span class="line">^[\u4e00-\u9fa5_a-zA-Z0-9]+$</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>返回顶部的通用方法</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">backTop</span>(<span class="params">btnId</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(btnId);</span><br><span class="line">    <span class="keyword">var</span> d = <span class="built_in">document</span>.documentElement;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="built_in">document</span>.body;</span><br><span class="line">    <span class="built_in">window</span>.onscroll = set;</span><br><span class="line">    btn.style.display = <span class="string">"none"</span>;</span><br><span class="line">    btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">        btn.style.display = <span class="string">"none"</span>;</span><br><span class="line">        <span class="built_in">window</span>.onscroll = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">this</span>.timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">            d.scrollTop -= <span class="built_in">Math</span>.ceil((d.scrollTop + b.scrollTop) * <span class="number">0.1</span>);</span><br><span class="line">            b.scrollTop -= <span class="built_in">Math</span>.ceil((d.scrollTop + b.scrollTop) * <span class="number">0.1</span>);</span><br><span class="line">            <span class="keyword">if</span> ((d.scrollTop + b.scrollTop) == <span class="number">0</span>) clearInterval(btn.timer, <span class="built_in">window</span>.onscroll = set);</span><br><span class="line">            }, <span class="number">10</span>);</span><br><span class="line">    };</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params"></span>) </span>{</span><br><span class="line">        btn.style.display = (d.scrollTop + b.scrollTop > <span class="number">100</span>) ? <span class="string">'block'</span>: <span class="string">"none"</span></span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line">backTop(<span class="string">'goTop'</span>);</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>获得URL中GET参数值</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用法：如果地址是 test.htm?t1=1&t2=2&t3=3, 那么能取得：GET["t1"], GET["t2"], GET["t3"]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_get</span>(<span class="params"></span>)</span>{ </span><br><span class="line">    querystr = <span class="built_in">window</span>.location.href.split(<span class="string">"?"</span>)</span><br><span class="line">    <span class="keyword">if</span>(querystr[<span class="number">1</span>]){</span><br><span class="line">        GETs = querystr[<span class="number">1</span>].split(<span class="string">"&"</span>);</span><br><span class="line">        GET = [];</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i<gets.length;i++){< span><br><span class="line">              tmp_arr = GETs.split(<span class="string">"="</span>)</span><br><span class="line">              key=tmp_arr[<span class="number">0</span>]</span><br><span class="line">              GET[key] = tmp_arr[<span class="number">1</span>]</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> querystr[<span class="number">1</span>];</span><br><span class="line">}</span><br></gets.length;i++){<></span></pre></td></tr></tbody></table></figure>
<ul>
<li>打开一个窗体通用方法</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">openWindow</span>(<span class="params">url,windowName,width,height</span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> x = <span class="built_in">parseInt</span>(screen.width / <span class="number">2.0</span>) - (width / <span class="number">2.0</span>); </span><br><span class="line">    <span class="keyword">var</span> y = <span class="built_in">parseInt</span>(screen.height / <span class="number">2.0</span>) - (height / <span class="number">2.0</span>);</span><br><span class="line">    <span class="keyword">var</span> isMSIE= (navigator.appName == <span class="string">"Microsoft Internet Explorer"</span>);</span><br><span class="line">    <span class="keyword">if</span> (isMSIE) {</span><br><span class="line">        <span class="keyword">var</span> p = <span class="string">"resizable=1,location=no,scrollbars=no,width="</span>;</span><br><span class="line">        p = p+width;</span><br><span class="line">           p = p+<span class="string">",height="</span>;</span><br><span class="line">           p = p+height;</span><br><span class="line">        p = p+<span class="string">",left="</span>;</span><br><span class="line">        p = p+x;</span><br><span class="line">        p = p+<span class="string">",top="</span>;</span><br><span class="line">        p = p+y;</span><br><span class="line">        retval = <span class="built_in">window</span>.open(url, windowName, p);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">var</span> win = <span class="built_in">window</span>.open(url, <span class="string">"ZyiisPopup"</span>, <span class="string">"top="</span> + y + <span class="string">",left="</span> + x + <span class="string">",scrollbars="</span> + scrollbars + <span class="string">",dialog=yes,modal=yes,width="</span> + width + <span class="string">",height="</span> + height + <span class="string">",resizable=no"</span> );</span><br><span class="line">        <span class="built_in">eval</span>(<span class="string">"try { win.resizeTo(width, height); } catch(e) { }"</span>);</span><br><span class="line">        win.focus();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>提取页面代码中所有网址</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> aa = <span class="built_in">document</span>.documentElement.outerHTML.match(<span class="regexp">/(url\(|src=|href=)[\"\']*([^\"\'\(\)\<\>\[\] ]+)[\"\'\)]*|(http:\/\/[\w\-\.]+[^\"\'\(\)\<\>\[\] ]+)/ig<!--\--><!--\--></span>).join(<span class="string">"\r\n"</span>).replace(<span class="regexp">/^(src=|href=|url\()[\"\']*|[\"\'\>\) ]*$/igm</span>,<span class="string">""</span>);</span><br><span class="line">alert(aa);</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>清除相同的数组</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.unique=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> x=<span class="keyword">this</span>.split(<span class="regexp">/[\r\n]+/</span>);</span><br><span class="line">    <span class="keyword">var</span> y=<span class="string">''</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i<x.length;i++){< span><br><span class="line">        <span class="keyword">if</span>(!<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"^"</span>+x.replace(<span class="regexp">/([^\w])/ig</span>,<span class="string">"\\$1"</span>)+<span class="string">"$"</span>,<span class="string">"igm"</span>).test(y)){</span><br><span class="line">            y+=x+<span class="string">"\r\n"</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">};</span><br></x.length;i++){<></span></pre></td></tr></tbody></table></figure>
<ul>
<li>按字母排序，对每行进行数组排序</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SetSort</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> text=K1.value.split(<span class="regexp">/[\r\n]/</span>).sort().join(<span class="string">"\r\n"</span>);<span class="comment">//顺序</span></span><br><span class="line">    <span class="keyword">var</span> test=K1.value.split(<span class="regexp">/[\r\n]/</span>).sort().reverse().join(<span class="string">"\r\n"</span>);<span class="comment">//反序</span></span><br><span class="line">    K1.value=K1.value!=text?text:test;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>清除html代码中的脚本</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clear_script</span>(<span class="params"></span>)</span>{</span><br><span class="line">    K1.value=K1.value.replace(<span class="regexp">/<script.*?>[\s\S]*?<\ script="">|\s+on[a-zA-Z]{3,16}\s?=\s?"[\s\S]*?"|\s+on[a-zA-Z]{3,16}\s?=\s?'[\s\S]*?'|\s+on[a-zA-Z]{3,16}\s?=[^ >]+/ig<!--\--></script.*?></span>,<span class="string">""</span>);</span><br><span class="line">}</span><br><span class="line">动态执行javascript脚本</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">javascript</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">try</span>{</span><br><span class="line">      <span class="built_in">eval</span>(K1.value);</span><br><span class="line">    }<span class="keyword">catch</span>(e){</span><br><span class="line">      alert(e.message);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>金额大写转换函数</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">transform</span>(<span class="params">tranvalue</span>) </span>{</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">var</span> i = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">var</span> dw2 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">""</span>, <span class="string">"万"</span>, <span class="string">"亿"</span>); <span class="comment">//大单位</span></span><br><span class="line">        <span class="keyword">var</span> dw1 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">"拾"</span>, <span class="string">"佰"</span>, <span class="string">"仟"</span>); <span class="comment">//小单位</span></span><br><span class="line">        <span class="keyword">var</span> dw = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">"零"</span>, <span class="string">"壹"</span>, <span class="string">"贰"</span>, <span class="string">"叁"</span>, <span class="string">"肆"</span>, <span class="string">"伍"</span>, <span class="string">"陆"</span>, <span class="string">"柒"</span>, <span class="string">"捌"</span>, <span class="string">"玖"</span>); <span class="comment">//整数部分用</span></span><br><span class="line">        <span class="comment">//以下是小写转换成大写显示在合计大写的文本框中     </span></span><br><span class="line">        <span class="comment">//分离整数与小数</span></span><br><span class="line">        <span class="keyword">var</span> source = splits(tranvalue);</span><br><span class="line">        <span class="keyword">var</span> num = source[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">var</span> dig = source[<span class="number">1</span>];</span><br><span class="line">        <span class="comment">//转换整数部分</span></span><br><span class="line">        <span class="keyword">var</span> k1 = <span class="number">0</span>; <span class="comment">//计小单位</span></span><br><span class="line">        <span class="keyword">var</span> k2 = <span class="number">0</span>; <span class="comment">//计大单位</span></span><br><span class="line">        <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">var</span> str = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">var</span> len = source[<span class="number">0</span>].length; <span class="comment">//整数的长度</span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">1</span>; i <= len;="" i++)="" {<="" span=""><br><span class="line">              <span class="keyword">var</span> n = source[<span class="number">0</span>].charAt(len - i); <span class="comment">//取得某个位数上的数字</span></span><br><span class="line">              <span class="keyword">var</span> bn = <span class="number">0</span>;</span><br><span class="line">              <span class="keyword">if</span> (len - i - <span class="number">1</span> >= <span class="number">0</span>) {</span><br><span class="line">                bn = source[<span class="number">0</span>].charAt(len - i - <span class="number">1</span>); <span class="comment">//取得某个位数前一位上的数字</span></span><br><span class="line">              }</span><br><span class="line">              sum = sum + <span class="built_in">Number</span>(n);</span><br><span class="line">              <span class="keyword">if</span> (sum != <span class="number">0</span>) {</span><br><span class="line">                str = dw[<span class="built_in">Number</span>(n)].concat(str); <span class="comment">//取得该数字对应的大写数字，并插入到str字符串的前面</span></span><br><span class="line">                <span class="keyword">if</span> (n == <span class="string">'0'</span>) sum = <span class="number">0</span>;</span><br><span class="line">              }</span><br><span class="line">              <span class="keyword">if</span> (len - i - <span class="number">1</span> >= <span class="number">0</span>) { <span class="comment">//在数字范围内</span></span><br><span class="line">                <span class="keyword">if</span> (k1 != <span class="number">3</span>) { <span class="comment">//加小单位</span></span><br><span class="line">                      <span class="keyword">if</span> (bn != <span class="number">0</span>) {</span><br><span class="line">                        str = dw1[k1].concat(str);</span><br><span class="line">                      }</span><br><span class="line">                      k1++;</span><br><span class="line">                } <span class="keyword">else</span> { <span class="comment">//不加小单位，加大单位</span></span><br><span class="line">                      k1 = <span class="number">0</span>;</span><br><span class="line">                      <span class="keyword">var</span> temp = str.charAt(<span class="number">0</span>);</span><br><span class="line">                      <span class="keyword">if</span> (temp == <span class="string">"万"</span> || temp == <span class="string">"亿"</span>) <span class="comment">//若大单位前没有数字则舍去大单位</span></span><br><span class="line">                      str = str.substr(<span class="number">1</span>, str.length - <span class="number">1</span>);</span><br><span class="line">                      str = dw2[k2].concat(str);</span><br><span class="line">                      sum = <span class="number">0</span>;</span><br><span class="line">                }</span><br><span class="line">              }</span><br><span class="line">              <span class="keyword">if</span> (k1 == <span class="number">3</span>){ <span class="comment">//小单位到千则大单位进一</span></span><br><span class="line">                k2++;</span><br><span class="line">              }</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">//转换小数部分</span></span><br><span class="line">        <span class="keyword">var</span> strdig = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">if</span> (dig != <span class="string">""</span>) {</span><br><span class="line">              <span class="keyword">var</span> n = dig.charAt(<span class="number">0</span>);</span><br><span class="line">              <span class="keyword">if</span> (n != <span class="number">0</span>) {</span><br><span class="line">                strdig += dw[<span class="built_in">Number</span>(n)] + <span class="string">"角"</span>; <span class="comment">//加数字</span></span><br><span class="line">              }</span><br><span class="line">              <span class="keyword">var</span> n = dig.charAt(<span class="number">1</span>);</span><br><span class="line">              <span class="keyword">if</span> (n != <span class="number">0</span>) {</span><br><span class="line">                strdig += dw[<span class="built_in">Number</span>(n)] + <span class="string">"分"</span>; <span class="comment">//加数字</span></span><br><span class="line">              }</span><br><span class="line">        }</span><br><span class="line">        str += <span class="string">"元"</span> + strdig;</span><br><span class="line">    } <span class="keyword">catch</span>(e) {</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"0元"</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">}</span><br><span class="line"><span class="comment">//拆分整数与小数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">splits</span>(<span class="params">tranvalue</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> value = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">''</span>, <span class="string">''</span>);</span><br><span class="line">    temp = tranvalue.split(<span class="string">"."</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i < temp.length; i++) {</span><br><span class="line">        value = temp;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">}</span><br><!--=--></span></pre></td></tr></tbody></table></figure>
<ul>
<li>获取窗体可见范围的宽与高</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getViewSize</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">var</span> de=<span class="built_in">document</span>.documentElement;</span><br><span class="line">    <span class="keyword">var</span> db=<span class="built_in">document</span>.body;</span><br><span class="line">    <span class="keyword">var</span> viewW=de.clientWidth==<span class="number">0</span> ?  db.clientWidth : de.clientWidth;</span><br><span class="line">    <span class="keyword">var</span> viewH=de.clientHeight==<span class="number">0</span> ?  db.clientHeight : de.clientHeight;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>(viewW ,viewH);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

            <div class="post-copyright">
    <div class="content">
        <!-- <p>最后更新： 2020年05月18日 23:10</p> -->
        <p>转载请保持原始链接</p>
        <p>原始链接： <a class="post-url" href="/note/9db8c984.html" title="javascript常用的代码片段">https://ru23.com/note/9db8c984.html</a></p>
        <footer>
            <a href="https://ru23.com">
                <img src="//cdn.ru23.com/img/images/chrome.png" alt="frank">
                frank
            </a>
        </footer>
    </div>
</div>

            
            
            

            
        </div>
        <footer class="article-footer">
            
            
<div class="post-share">
    <a href="javascript:;" id="share-sub" class="post-share-fab">
        <i class="fa fa-share-alt"></i>
    </a>
    <div class="post-share-list" id="share-list">
        <ul class="share-icons">
          <li>
            <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://ru23.com/note/9db8c984.html&title=《javascript常用的代码片段》 — 前端迷&pic=//cdn.ru23.com/img/images/chrome.png" data-title="微博">
              <i class="fa fa-weibo"></i>
            </a>
          </li>
          <li>
            <a class="weixin share-sns" id="wxFab" href="javascript:;" data-title="微信">
              <i class="fa fa-weixin"></i>
            </a>
          </li>
          <li>
            <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://ru23.com/note/9db8c984.html&title=《javascript常用的代码片段》 — 前端迷&source=
转义特殊字符为html实体

123HtmlEncode: function(str){	return str.replace(/&/..." data-title="QQ">
              <i class="fa fa-qq"></i>
            </a>
          </li>
          <li>
            <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://ru23.com/note/9db8c984.html" data-title="Facebook">
              <i class="fa fa-facebook"></i>
            </a>
          </li>
          <li>
            <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《javascript常用的代码片段》 — 前端迷&url=https://ru23.com/note/9db8c984.html&via=https://ru23.com" data-title="Twitter">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
          <li>
            <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://ru23.com/note/9db8c984.html" data-title="Google+">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        </ul>
     </div>
</div>
<div class="post-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;" id="wxShare-close">×</a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACuCAAAAACKZ2kyAAABy0lEQVR42u3aS2rDQBAFQN//0so24Nh6T60ZRKhZBSLLNV40/Xu94nO8nfy/v595f/614uDi4o65x9ez4pnvFzi5PC4u7kZuEnqSr8nD1qfnT2y4uLiP5H5CtCEMFxf3/3HbOiW5Ki4u7tO4k6Kl7WBsqtVwcXEH3Dwkrft7SX8XFxf3EvcoT3uZSZP0j2/HxcXdws0DyvcmSN74aNMXXFzc/dx84JGPQ/KWR/seXFzcPdzJKybJUP7TFGhcXNxbuW2oykcmkzWLj5/CxcXdyG2Ho9fKm3YJI6rVcHFxF3CTgDIpZvJxbF384OLiLuAm4aZdsWqvmpdDuLi4O7ltByVPYvKCJ0p9cHFxt3Dn6UhUogyGLkWthouLeys3ecWkIXJtyHryWVxc3MXcPKDcG5jy1OekOYKLi7uY245G7lrqKiIVLi7uRm5Ob5e3XuUppj24uLgLuEd55otWF2e/uLi4G7ltcGlDVVvktG/AxcVdx22DV5sMtaXRyc+Bi4u7kTsJNFGj89JYJVq/wMXFfQA3T2va1YqiYsPFxX0wNxmWzFsetwUyXFzckntt9SpvjrQpUTETxsXFXcBtQ8lkBNJeeNTfxcXFvcL9ASYV4jFy9Yk3AAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>

<div class="mask"></div>

            
            <ul class="article-footer-menu">
                
                
  <li class="article-footer-tags">
    <i class="fa fa-tags"></i>
      
    <a href="/tags/javascript/" class="color1">javascript</a>
      
    <a href="/tags/Snippet/" class="color3">Snippet</a>
      
  </li>

            </ul>
            
        </footer>
    </div>
</article>



<nav id="article-nav">
  
    <a href="/note/3c8059e3.html" id="article-nav-newer" class="article-nav-link-wrap">

      <span class="article-nav-title">
        <i class="fa fa-hand-o-left" aria-hidden="true"></i>
        
          save-dev 和--save的区别
        
      </span>
    </a>
  
  
    <a href="/note/ed6083ef.html" id="article-nav-older" class="article-nav-link-wrap">
      <span class="article-nav-title">jquery笔记总结篇</span>
      <i class="fa fa-hand-o-right" aria-hidden="true"></i>
    </a>
  
</nav>




<!-- Valine Comments -->
<div class="comments vcomment" id="comments"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
<!-- Valine Comments script -->
<script>
    var GUEST_INFO = ['nick', 'mail', 'link'];
    var guest_info = 'nick,mail,link'.split(',').filter(function (item) {
        return GUEST_INFO.indexOf(item) > -1
    });
    new Valine({
        el: '#comments',
        notify: 'true' == 'true',
        verify: 'false' == 'true',
        appId: "OOiJvCREqswvpnTL4RuSShLq-gzGzoHsz",
        appKey: "OPfVBB2YjMrT3ngcc8mu6w8g",
        avatar: "mm",
        qrcode: "",
        placeholder: "输入评论...",
        guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
        pageSize: "10"
    })
</script>
<!-- Valine Comments end -->

</section>
        <div class="outer-ad-aside" id="outer-ad-aside">
          
          
          <a style="display: block;" title="阿里云双十二大促，新老用户皆可返现" target="_blank" href="https://www.aliyun.com/minisite/goods?userCode=jh5fwy2j&share_source=copy_link">
            
            <div class="ad-text" style="text-align:center;color: red;">
              阿里云双十二大促，新老用户皆可返现
            </div>
            
            <img src="https://img.alicdn.com/tfs/TB1_rYHo7P2gK0jSZPxXXacQpXa-690-388.jpg" alt="阿里云双十二大促，新老用户皆可返现">
          </a>
          
          <a style="display: block;" title="【腾讯云】云产品采购季，助力行业复工。1核2G云服务器，首年99元" target="_blank" href="https://cloud.tencent.com/act/cps/redirect?redirect=1067&cps_key=3bd05bbfb4f3f97d7bb5964ef12edda9&from=console">
            
            <div class="ad-text" style="text-align:center;color: red;">
              【腾讯云】云产品采购季，助力行业复工。1核2G云服务器，首年99元
            </div>
            
            <img src="https://upload-dianshi-1255598498.file.myqcloud.com/345x200-c37e147ab2b4b8074e63d71ca21420cf1a7d4933.png" alt="【腾讯云】云产品采购季，助力行业复工。1核2G云服务器，首年99元">
          </a>
          
          <a style="display: block;" title="微信公众号：前端迷" target="_blank" ">
            
            <img src="//cdn.ru23.com/hexo/public/wechat-mp.png" alt>
          </a>
          
          <a style="display: block;" title="微信前端技术交流群" target="_blank" ">
            
            <img src="//cdn.ru23.com/hexo/public/group.png" alt>
          </a>
          
          <a style="display: block;" target="_blank" ">
            
            <div class="ad-text" style="text-align:center;color: red;">
              广告位出售，日ip100+，联系vx:qianduanmi,备注广告，价格5元/月，随时上线
            </div>
            
            <img src=" https://cdn.ru23.com/common/sale.png" alt="广告位出售，日ip100+，联系vx:qianduanmi,备注广告，价格5元/月，随时上线">
          </a>
          
          
        </div>
      </div>
      
    </div>
    <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            
<p>
    <span id="busuanzi_container_site_uv" style="display:none">
        总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style="display:none">
        总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>



                <p>
                    CDN 存储在
                    <a href="https://console.upyun.com/register/?invite=SJ3dme4q8" target="_blank">
                        <style>
                            .upyun0box {
                                width: 14px;
                                height: 14px;
                                position: relative;
                                top: 3px;
                            }
                        </style>
                        <img class="upyun0box" src="https://www.upyun.com/static/favicon-64x64.png"> 又拍云
                    </a>
                    <br>
                </p>
                <p>
                    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> 主题是 <a href="https://github.com/6fedcom/fe-hexo-blog" target="_blank">基于MiHo主题优化</a> ©
                    2020
                        frank<br>
                </p>
        </div>
    </div>
</footer>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="https://js.fundebug.cn/fundebug.1.5.1.min.js" apikey="912ba8d8c6f372862c218e996a28cebb732bbb78559e974fc031204c813142f9"></script>
<script>
  var mihoConfig = {
    root: "https://ru23.com",
    animate: false,
    isHome: false,
    share: true,
    reward: 2
  }
</script>
<div class="sidebar">
    <div id="sidebar-search" title="Search">
        <i class="fa fa-search"></i>
    </div>
    <div id="sidebar-category" title="Categories">
        <i class="fa fa-book"></i>
    </div>
    <div id="sidebar-tag" title="Tags">
        <i class="fa fa-tags"></i>
    </div>
    <div id="sidebar-top">
        <span class="sidebar-top-icon"><i class="fa fa-angle-up"></i></span>
    </div>
</div>
<div class="sidebar-menu-box" id="sidebar-menu-box">
    <div class="sidebar-menu-box-container">
        <div id="sidebar-menu-box-categories">
            <a class="category-link" href="/categories/algorithm/">algorithm</a><a class="category-link" href="/categories/back-end/">back-end</a><a class="category-link" href="/categories/fed-shared/">fed-shared</a><a class="category-link" href="/categories/front-end/">front-end</a><a class="category-link" href="/categories/hexo/">hexo</a><a class="category-link" href="/categories/tools/">tools</a><a class="category-link" href="/categories/前端自动化/">前端自动化</a>
        </div>
        <div id="sidebar-menu-box-tags">
            <a href="/tags/CSS/" style="font-size: 13.08px;">CSS</a> <a href="/tags/Emmet/" style="font-size: 10px;">Emmet</a> <a href="/tags/HTTP/" style="font-size: 10.77px;">HTTP</a> <a href="/tags/Immutable/" style="font-size: 11.54px;">Immutable</a> <a href="/tags/MVC/" style="font-size: 10px;">MVC</a> <a href="/tags/Snippet/" style="font-size: 13.08px;">Snippet</a> <a href="/tags/Vue/" style="font-size: 13.08px;">Vue</a> <a href="/tags/ajax/" style="font-size: 11.54px;">ajax</a> <a href="/tags/angular/" style="font-size: 10px;">angular</a> <a href="/tags/api/" style="font-size: 12.31px;">api</a> <a href="/tags/atom/" style="font-size: 10px;">atom</a> <a href="/tags/axios/" style="font-size: 12.31px;">axios</a> <a href="/tags/bootstrap/" style="font-size: 10.77px;">bootstrap</a> <a href="/tags/canvas/" style="font-size: 11.54px;">canvas</a> <a href="/tags/cookie/" style="font-size: 10px;">cookie</a> <a href="/tags/css/" style="font-size: 16.15px;">css</a> <a href="/tags/dom/" style="font-size: 13.08px;">dom</a> <a href="/tags/dva/" style="font-size: 11.54px;">dva</a> <a href="/tags/echart/" style="font-size: 10px;">echart</a> <a href="/tags/editconfig/" style="font-size: 10px;">editconfig</a> <a href="/tags/es6/" style="font-size: 13.85px;">es6</a> <a href="/tags/eslint/" style="font-size: 10.77px;">eslint</a> <a href="/tags/fed-shared/" style="font-size: 11.54px;">fed-shared</a> <a href="/tags/fetch/" style="font-size: 10px;">fetch</a> <a href="/tags/flex/" style="font-size: 10px;">flex</a> <a href="/tags/front-end/" style="font-size: 10px;">front-end</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/github/" style="font-size: 12.31px;">github</a> <a href="/tags/gulp/" style="font-size: 10.77px;">gulp</a> <a href="/tags/hexo/" style="font-size: 10.77px;">hexo</a> <a href="/tags/hide/" style="font-size: 10.77px;">hide</a> <a href="/tags/html5/" style="font-size: 16.92px;">html5</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/hybrid/" style="font-size: 10px;">hybrid</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jquery/" style="font-size: 17.69px;">jquery</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/js代码片段/" style="font-size: 12.31px;">js代码片段</a> <a href="/tags/mock/" style="font-size: 10px;">mock</a> <a href="/tags/ms/" style="font-size: 10px;">ms</a> <a href="/tags/mvvm/" style="font-size: 11.54px;">mvvm</a> <a href="/tags/nginx/" style="font-size: 12.31px;">nginx</a> <a href="/tags/node/" style="font-size: 13.85px;">node</a> <a href="/tags/npm/" style="font-size: 13.08px;">npm</a> <a href="/tags/promise/" style="font-size: 10px;">promise</a> <a href="/tags/react/" style="font-size: 19.23px;">react</a> <a href="/tags/redux/" style="font-size: 13.08px;">redux</a> <a href="/tags/sublime/" style="font-size: 15.38px;">sublime</a> <a href="/tags/svn/" style="font-size: 10.77px;">svn</a> <a href="/tags/taro/" style="font-size: 10px;">taro</a> <a href="/tags/todolist/" style="font-size: 10px;">todolist</a> <a href="/tags/video/" style="font-size: 10px;">video</a> <a href="/tags/vscode/" style="font-size: 11.54px;">vscode</a> <a href="/tags/vue/" style="font-size: 18.46px;">vue</a> <a href="/tags/vuex/" style="font-size: 10.77px;">vuex</a> <a href="/tags/webpack/" style="font-size: 15.38px;">webpack</a> <a href="/tags/webstorm/" style="font-size: 10px;">webstorm</a> <a href="/tags/xhtml/" style="font-size: 10px;">xhtml</a> <a href="/tags/中间件/" style="font-size: 10px;">中间件</a> <a href="/tags/事件/" style="font-size: 10px;">事件</a> <a href="/tags/事件流/" style="font-size: 10px;">事件流</a> <a href="/tags/优质文章分享/" style="font-size: 11.54px;">优质文章分享</a> <a href="/tags/作用域/" style="font-size: 10px;">作用域</a> <a href="/tags/前端优化/" style="font-size: 10.77px;">前端优化</a> <a href="/tags/前端基础/" style="font-size: 10px;">前端基础</a> <a href="/tags/前端自动化/" style="font-size: 10px;">前端自动化</a> <a href="/tags/前端规范/" style="font-size: 14.62px;">前端规范</a> <a href="/tags/原型链/" style="font-size: 10px;">原型链</a> <a href="/tags/小程序/" style="font-size: 13.85px;">小程序</a> <a href="/tags/居中/" style="font-size: 10px;">居中</a> <a href="/tags/异步回调/" style="font-size: 10px;">异步回调</a> <a href="/tags/微信开发/" style="font-size: 11.54px;">微信开发</a> <a href="/tags/快应用/" style="font-size: 10px;">快应用</a> <a href="/tags/性能优化/" style="font-size: 10px;">性能优化</a> <a href="/tags/排序算法/" style="font-size: 10px;">排序算法</a> <a href="/tags/最佳实践/" style="font-size: 10px;">最佳实践</a> <a href="/tags/正则表达式/" style="font-size: 10.77px;">正则表达式</a> <a href="/tags/测试/" style="font-size: 10px;">测试</a> <a href="/tags/知识点/" style="font-size: 11.54px;">知识点</a> <a href="/tags/移动端/" style="font-size: 13.08px;">移动端</a> <a href="/tags/组件化/" style="font-size: 10px;">组件化</a> <a href="/tags/继承/" style="font-size: 10.77px;">继承</a> <a href="/tags/缓存/" style="font-size: 10px;">缓存</a> <a href="/tags/读书笔记/" style="font-size: 10.77px;">读书笔记</a> <a href="/tags/跨域/" style="font-size: 11.54px;">跨域</a> <a href="/tags/踩过的坑/" style="font-size: 16.92px;">踩过的坑</a> <a href="/tags/适配/" style="font-size: 10px;">适配</a> <a href="/tags/速查表/" style="font-size: 10px;">速查表</a> <a href="/tags/部署/" style="font-size: 10.77px;">部署</a> <a href="/tags/闭包/" style="font-size: 10px;">闭包</a> <a href="/tags/面向对象/" style="font-size: 10.77px;">面向对象</a> <a href="/tags/面试/" style="font-size: 12.31px;">面试</a> <a href="/tags/高阶函数/" style="font-size: 10.77px;">高阶函数</a>
        </div>
    </div>
    <a href="javascript:;" class="sidebar-menu-box-close">×</a>
</div>
<div class="mobile-header-menu-nav" id="mobile-header-menu-nav">
    <div class="mobile-header-menu-container">
        <span class="title">Menus</span>
        <ul class="mobile-header-menu-navbar">
            
            <li>
                <a target="_blank" href="https://58fe.com">
                    <i class="fa fa-heart"></i><span>前端社区</span>
                </a>
            </li>
            
            <li>
                <a href="/">
                    <i class="fa fa-home"></i><span>主页</span>
                </a>
            </li>
            
            <li>
                <a href="/archives">
                    <i class="fa fa-archive"></i><span>归档</span>
                </a>
            </li>
            
        </ul>
    </div>
    <div class="mobile-header-tag-container">
        <span class="title">Tags</span>
        <div id="mobile-header-container-tags">
            <a href="/tags/CSS/" style="font-size: 13.08px;">CSS</a> <a href="/tags/Emmet/" style="font-size: 10px;">Emmet</a> <a href="/tags/HTTP/" style="font-size: 10.77px;">HTTP</a> <a href="/tags/Immutable/" style="font-size: 11.54px;">Immutable</a> <a href="/tags/MVC/" style="font-size: 10px;">MVC</a> <a href="/tags/Snippet/" style="font-size: 13.08px;">Snippet</a> <a href="/tags/Vue/" style="font-size: 13.08px;">Vue</a> <a href="/tags/ajax/" style="font-size: 11.54px;">ajax</a> <a href="/tags/angular/" style="font-size: 10px;">angular</a> <a href="/tags/api/" style="font-size: 12.31px;">api</a> <a href="/tags/atom/" style="font-size: 10px;">atom</a> <a href="/tags/axios/" style="font-size: 12.31px;">axios</a> <a href="/tags/bootstrap/" style="font-size: 10.77px;">bootstrap</a> <a href="/tags/canvas/" style="font-size: 11.54px;">canvas</a> <a href="/tags/cookie/" style="font-size: 10px;">cookie</a> <a href="/tags/css/" style="font-size: 16.15px;">css</a> <a href="/tags/dom/" style="font-size: 13.08px;">dom</a> <a href="/tags/dva/" style="font-size: 11.54px;">dva</a> <a href="/tags/echart/" style="font-size: 10px;">echart</a> <a href="/tags/editconfig/" style="font-size: 10px;">editconfig</a> <a href="/tags/es6/" style="font-size: 13.85px;">es6</a> <a href="/tags/eslint/" style="font-size: 10.77px;">eslint</a> <a href="/tags/fed-shared/" style="font-size: 11.54px;">fed-shared</a> <a href="/tags/fetch/" style="font-size: 10px;">fetch</a> <a href="/tags/flex/" style="font-size: 10px;">flex</a> <a href="/tags/front-end/" style="font-size: 10px;">front-end</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/github/" style="font-size: 12.31px;">github</a> <a href="/tags/gulp/" style="font-size: 10.77px;">gulp</a> <a href="/tags/hexo/" style="font-size: 10.77px;">hexo</a> <a href="/tags/hide/" style="font-size: 10.77px;">hide</a> <a href="/tags/html5/" style="font-size: 16.92px;">html5</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/hybrid/" style="font-size: 10px;">hybrid</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jquery/" style="font-size: 17.69px;">jquery</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/js代码片段/" style="font-size: 12.31px;">js代码片段</a> <a href="/tags/mock/" style="font-size: 10px;">mock</a> <a href="/tags/ms/" style="font-size: 10px;">ms</a> <a href="/tags/mvvm/" style="font-size: 11.54px;">mvvm</a> <a href="/tags/nginx/" style="font-size: 12.31px;">nginx</a> <a href="/tags/node/" style="font-size: 13.85px;">node</a> <a href="/tags/npm/" style="font-size: 13.08px;">npm</a> <a href="/tags/promise/" style="font-size: 10px;">promise</a> <a href="/tags/react/" style="font-size: 19.23px;">react</a> <a href="/tags/redux/" style="font-size: 13.08px;">redux</a> <a href="/tags/sublime/" style="font-size: 15.38px;">sublime</a> <a href="/tags/svn/" style="font-size: 10.77px;">svn</a> <a href="/tags/taro/" style="font-size: 10px;">taro</a> <a href="/tags/todolist/" style="font-size: 10px;">todolist</a> <a href="/tags/video/" style="font-size: 10px;">video</a> <a href="/tags/vscode/" style="font-size: 11.54px;">vscode</a> <a href="/tags/vue/" style="font-size: 18.46px;">vue</a> <a href="/tags/vuex/" style="font-size: 10.77px;">vuex</a> <a href="/tags/webpack/" style="font-size: 15.38px;">webpack</a> <a href="/tags/webstorm/" style="font-size: 10px;">webstorm</a> <a href="/tags/xhtml/" style="font-size: 10px;">xhtml</a> <a href="/tags/中间件/" style="font-size: 10px;">中间件</a> <a href="/tags/事件/" style="font-size: 10px;">事件</a> <a href="/tags/事件流/" style="font-size: 10px;">事件流</a> <a href="/tags/优质文章分享/" style="font-size: 11.54px;">优质文章分享</a> <a href="/tags/作用域/" style="font-size: 10px;">作用域</a> <a href="/tags/前端优化/" style="font-size: 10.77px;">前端优化</a> <a href="/tags/前端基础/" style="font-size: 10px;">前端基础</a> <a href="/tags/前端自动化/" style="font-size: 10px;">前端自动化</a> <a href="/tags/前端规范/" style="font-size: 14.62px;">前端规范</a> <a href="/tags/原型链/" style="font-size: 10px;">原型链</a> <a href="/tags/小程序/" style="font-size: 13.85px;">小程序</a> <a href="/tags/居中/" style="font-size: 10px;">居中</a> <a href="/tags/异步回调/" style="font-size: 10px;">异步回调</a> <a href="/tags/微信开发/" style="font-size: 11.54px;">微信开发</a> <a href="/tags/快应用/" style="font-size: 10px;">快应用</a> <a href="/tags/性能优化/" style="font-size: 10px;">性能优化</a> <a href="/tags/排序算法/" style="font-size: 10px;">排序算法</a> <a href="/tags/最佳实践/" style="font-size: 10px;">最佳实践</a> <a href="/tags/正则表达式/" style="font-size: 10.77px;">正则表达式</a> <a href="/tags/测试/" style="font-size: 10px;">测试</a> <a href="/tags/知识点/" style="font-size: 11.54px;">知识点</a> <a href="/tags/移动端/" style="font-size: 13.08px;">移动端</a> <a href="/tags/组件化/" style="font-size: 10px;">组件化</a> <a href="/tags/继承/" style="font-size: 10.77px;">继承</a> <a href="/tags/缓存/" style="font-size: 10px;">缓存</a> <a href="/tags/读书笔记/" style="font-size: 10.77px;">读书笔记</a> <a href="/tags/跨域/" style="font-size: 11.54px;">跨域</a> <a href="/tags/踩过的坑/" style="font-size: 16.92px;">踩过的坑</a> <a href="/tags/适配/" style="font-size: 10px;">适配</a> <a href="/tags/速查表/" style="font-size: 10px;">速查表</a> <a href="/tags/部署/" style="font-size: 10.77px;">部署</a> <a href="/tags/闭包/" style="font-size: 10px;">闭包</a> <a href="/tags/面向对象/" style="font-size: 10.77px;">面向对象</a> <a href="/tags/面试/" style="font-size: 12.31px;">面试</a> <a href="/tags/高阶函数/" style="font-size: 10.77px;">高阶函数</a>
        </div>
    </div>
</div>
<div class="search-wrap">
    <span class="search-close">×</span>
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
            <i class="icon icon-lg icon-chevron-left"></i>
        </a>
        <input class="search-field" placeholder="Search..." id="keywords">
        <a id="search-submit" href="javascript:;">
            <i class="fa fa-search"></i>
        </a>
    <div class="search-container" id="search-container">
        <ul class="search-result" id="search-result">
        </ul>
    </div>
</div>

<div id="search-tpl">
    <li class="search-result-item">
        <a href="{url}" class="search-item-li">
            <span class="search-item-li-title" title="{title}">{title}</span>
        </a>
    </li>
</div>
<script src="//cdn.ru23.com/js/search.js"></script>
<script src="//cdn.ru23.com/js/main.js"></script>









<script src="//cdn.ru23.com/js/pop-img.js"></script>
<script>
  $(".article-entry p img").popImg();
</script>

  </div>


<script type="text/javascript" charset="utf-8" src="/js/lazyload-plugin/lazyload.intersectionObserver.min.js"></script></body></html>